<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>E-Service</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/smoothness/jquery-ui-1.10.3.custom.min.css" />
    <link rel="stylesheet" href="css/jquery.mobile-1.3.1.min.css" />
    <script src="js/jquery-2.0.2.min.js"></script>
    <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="js/jquery.mobile-1.3.1.min.js"></script>
    <script src="js/DataBase.js"></script>
    <script src="js/funciones.js"></script>
    <script src="js/Login.js"></script>
    <script src="js/Sinc.js"></script>
    <script src="js/Solicitudes.js"></script>
    <script src="js/Reportes.js"></script>
    <script>
        var diferencia = new Date().getTimezoneOffset();

        DB.CrearTablas();
        $(function () {
            $("#progressbar").progressbar({
                value: false
            });
            var t = new Date(1900, 1, 1, 0, 0, 0, 0);
            while (t < (new Date(1900, 1, 2, 0, 0, 0, 0))) {
                $("#cboHoraInicial").append(new Option(("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), false, false));
                $("#cboHoraFinal").append(new Option(("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), false, false));
                $("#cboRepHoraInicio").append(new Option(("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), false, false));
                $("#cboRepHoraFinal").append(new Option(("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), false, false));
                $("#cboTiempotraslado").append(new Option(("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), ("0" + t.getHours()).slice(-2) + ":" + ("0" + t.getMinutes()).slice(-2), false, false));

                t.setMinutes(t.getMinutes() + 15);
            }
            $("#cboTipoCierre").change(function (event) {
                switch ($(this).val()) {
                    case "3":
                    case "1":
                        $.mobile.changePage("#pagIngRep", { transition: "none", reverse: false, changeHash: false });
                        Reportes.Cargar();
                        break;
                }
            });
            $("#cboCliente").change(function (event) { DB.Execute("Select * from sucursal where IDCLI = " + $("#cboCliente").val(), function (result) { ArmarSelect("#cboSucursal", result, 0); }); });
            $("#cboSucursal").change(function (event) { DB.Execute("Select * from EQUIPOS where IDSUC = " + $("#cboSucursal").val(), function (result) { ArmarSelect("#cboEquipo", result, 0); }); });
            //$("#cboEquipo").change(function (event) { });            
        });
    </script>
    <script>     
    </script>
    <!--Sinc-->
    <script>      
    </script>
</head>
<body>
    <!-- Login -->
    <div data-role="page" id="pagLogin">
        <div data-theme="b" data-role="header">
            <h3>E-Service
            </h3>
        </div>
        <div data-role="content">
            <div style="text-align: center">
            </div>
            <div data-role="fieldcontain">
                <label for="user">Usuario:</label>
                <input name="" id="user" placeholder="" value="" type="text">
            </div>
            <div data-role="fieldcontain">
                <label for="password">Contraseña:</label>
                <input name="" id="password" placeholder="" value="" type="password">
            </div>
            <a href="#" data-role="button" data-theme="e" data-icon="alert" data-corners="false" data-iconpos="right" style="display: none;" id="errLogin">Usuario No Existe!!!</a>
            <a data-role="button" data-transition="none" data-theme="b" href="javascript:Login.Validar();" data-icon="check" data-iconpos="right">Iniciar Sesión</a>

        </div>
    </div>
    <!-- Sincronizacion -->
    <div data-role="page" id="pagSinc">
        <div data-theme="b" data-role="header">
            <h3>E-Service</h3>
            <a href="javascript:Sinc.Actializar();" data-role="button" data-icon="refresh" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-refresh ui-btn-right" data-iconshadow="false">Actualizar</a>
        </div>
        <div data-role="content">
            <h4>Sincronizacion de Archivos</h4>
            <div id="progressbar"></div>
            <ul data-role="listview" data-count-theme="c" data-inset="true">
                <li data-icon="refresh"><a href="#">Clientes<span class="ui-li-count" id="spanClientes">0 %</span></a></li>
                <li data-icon="refresh"><a href="#">Sucursales<span class="ui-li-count" id="spanSucursal">0 %</span></a></li>
                <li data-icon="refresh"><a href="#">Equipos<span class="ui-li-count" id="spanEquipos">0 %</span></a></li>
                <li data-icon="refresh"><a href="#">Tipos Solicitud<span class="ui-li-count" id="spanTipoSolicitud">0 %</span></a></li>
            </ul>
            <a data-role="button" data-transition="none" data-theme="b" href="javascript:Solicitudes.Lista();" data-icon="check" data-iconpos="right">Aceptar</a>
        </div>
    </div>
    <!-- Menu -->
    <div data-role="page" id="pagMenu">
        <div data-theme="d" data-role="header">
            <h3>Menú E-Service
            </h3>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-divider-theme="b" data-inset="false">
                <li data-role="list-divider" role="heading">Solicitudes
                </li>
                <li data-theme="c" data-icon="bars">
                    <a href="javascript:Solicitudes.Lista();" data-transition="slide">Lista Solicitudes<span class="ui-li-count" id="NroSolicitudes">12</span>
                    </a>
                </li>
                <li data-theme="c" data-icon="edit">
                    <a href="#pagIngRep" data-transition="slide">Reportes
                    </a>
                </li>
                <li data-role="list-divider" role="heading">Configuración
                </li>
                <li data-theme="c" data-icon="refresh">
                    <a href="#pagSinc" data-transition="slide">Sincronizar Datos
                    </a>
                </li>
                <li data-role="list-divider" role="heading">Usuario
                </li>
                <li data-theme="c" data-icon="delete">
                    <a href="#pagLogin" data-transition="slide">Cerrar Sesión
                    </a>
                </li>
            </ul>
        </div>
    </div>
    <!-- Lista Solicitudes -->
    <div data-role="page" id="pagListSol">
        <div data-theme="b" data-role="header">
            <h3>E-Service</h3>
            <a href="#pagMenu" data-role="button" data-icon="bars" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-bars" data-transition="slide">Menu</a>
            <a href="javascript:Solicitudes.RecuperarGrid();" data-role="button" data-icon="refresh" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-refresh" data-iconshadow="false">Actualizar</a>
        </div>
        <div data-role="content">
            <ul data-role="listview" data-inset="true" data-filter="true" data-filter-placeholder="Buscar..." data-filter-theme="e" id="listSol"></ul>
        </div>
    </div>
    <!-- Solicitudes -->
    <div data-role="page" id="pagCloseSol">
        <div data-theme="b" data-role="header">
            <a href="#pagMenu" data-role="button" data-icon="bars" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-bars" data-transition="slide">Menu</a>
            <h3>E-Service</h3>
        </div>
        <div data-role="content">
            <div data-role="fieldcontain">
                <label for="lblCliente">Cliente:</label>
                <input name="" id="lblCliente" placeholder="" value="" type="text" data-mini="true" readonly="readonly">
            </div>
            <div data-role="fieldcontain">
                <label for="lblSucursal">Sucursal:</label>
                <input name="" id="lblSucursal" placeholder="" value="" type="text" data-mini="true" readonly="readonly">
            </div>
            <div data-role="fieldcontain">
                <label for="lblAnalizador">Analizador:</label>
                <input name="" id="lblAnalizador" placeholder="" value="" type="text" data-mini="true" readonly="readonly">
            </div>
            <div data-role="fieldcontain">
                <label for="lblFecApertura">Fecha de Apertura:</label>
                <input name="" id="lblFecApertura" placeholder="" value="" type="text" data-mini="true" readonly="readonly">
            </div>
            <div data-role="fieldcontain">
                <label for="lblFecOntime">Fecha OnTime:</label>
                <input name="" id="lblFecOntime" placeholder="" value="" type="text" data-mini="true" readonly="readonly">
            </div>
            <div data-role="fieldcontain">
                <label for="cboTipoCierre">Tipo Cierre:</label>
                <select id="cboTipoCierre" name="" data-mini="true">
                    <option value="-1">TIPO DE CIERRE</option>
                    <option value="0">TELEFONICO</option>
                    <option value="1">VISITA</option>
                    <option value="2">CANCELACION</option>
                    <option value="3">CAPACITACION</option>
                    <option value="4">REMOTO</option>
                </select>
            </div>
            <div data-role="fieldcontain">
                <label for="txtNumRep">Numero de Reporte:</label>
                <input name="" id="txtNumRep" placeholder="" value="" type="text" data-mini="true">
            </div>
            <div data-role="fieldcontain">
                <label for="txtFechaInicio">Fecha Inicial:</label>
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <div data-role="fieldcontain">
                            <input type="date" id="txtFechaInicio" data-mini="true" required />
                        </div>
                    </div>
                    <div class="ui-block-b">
                        <div data-role="fieldcontain">
                            <select id="cboHoraInicial" data-mini="true" required></select>
                        </div>
                    </div>
                </div>
            </div>
            <div data-role="fieldcontain">
                <label for="txtFechaFinal">Fecha Final:</label>
                <div class="ui-grid-a">
                    <div class="ui-block-a">
                        <div data-role="fieldcontain">
                            <input type="date" id="txtFechaFinal" data-mini="true" required />
                        </div>
                    </div>
                    <div class="ui-block-b">
                        <div data-role="fieldcontain">
                            <select id="cboHoraFinal" data-mini="true" required></select>
                        </div>
                    </div>
                </div>
            </div>
            <div data-role="fieldcontain">
                <label for="txtSolicitud">Solicitud:</label>
                <textarea name="" id="txtSolicitud" placeholder="" data-mini="true" readonly="readonly"></textarea>
            </div>
            <div data-role="fieldcontain">
                <label for="txtObservaciones">Observaciones:</label>
                <textarea name="" id="txtObservaciones" placeholder="" data-mini="true"></textarea>
            </div>
            <div data-role="fieldcontain">
                <label id="error" style="color: #800000; font-weight: bold"></label>
            </div>
            <button id="btnGuardar" data-theme="b" data-icon="check" data-iconpos="right" value="Guardar" data-mini="true" onclick="javascript:Solicitudes.Cerrar.ValidarFechas(true);"></button>
        </div>
    </div>
    <!-- Reportes -->
    <div data-role="page" id="pagIngRep">
        <div data-theme="b" data-role="header">
            <a href="#pagMenu" data-role="button" data-icon="bars" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-bars" data-transition="slide">Menu</a>
            <h3>E-Service</h3>
            <a href="Javascript:Reportes.Nuevo();" data-role="button" data-icon="plus" data-iconpos="notext" data-theme="b" data-inline="true" class="ui-icon-plus" data-transition="slide">Nuevo</a>
        </div>
        <div data-role="content">
            <div data-role="popup" id="popupAlert" class="ui-content" style="max-width: 280px">
                <a href="#" data-rel="back" data-role="button" data-theme="a" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Cerrar</a>
                <p>Alertas </p>
            </div>
            <div data-role="collapsible-set">
                <div data-role="collapsible" data-collapsed="false" data-theme="b" data-content-theme="c">
                    <h3>Informacion del Reporte</h3>
                    <div data-role="fieldcontain">
                        <label for="cboCliente">Cliente:</label>
                        <select id="cboCliente" name=""  data-mini="true" required></select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="cboSucursal">Sucursal:</label><select id="cboSucursal" name=""  data-mini="true" required></select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="cboEquipo">Equipo:</label><select id="cboEquipo" name="" data-mini="true" required></select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="cboTipoServicio">Tipo Servicio:</label><select id="cboTipoServicio" name="" data-mini="true" required></select>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtMotivo">Motivo:</label><textarea name="" id="txtMotivo" placeholder="" data-mini="true" required></textarea>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtLabor">Labor Realizada:</label><textarea name="" id="txtLabor" placeholder="" data-mini="true" required></textarea>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtObservacion">Observaciones:</label><textarea name="" id="txtObservacion" data-mini="true" placeholder=""></textarea>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtFecInicial">Fecha Inicial:</label>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <div data-role="fieldcontain">
                                    <input type="date" id="txtFecInicial" data-mini="true" required />
                                </div>
                            </div>
                            <div class="ui-block-b">
                                <div data-role="fieldcontain">
                                    <select id="cboRepHoraInicio" data-mini="true" required></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtFecFinal">Fecha Final:</label>
                        <div class="ui-grid-a">
                            <div class="ui-block-a">
                                <div data-role="fieldcontain">
                                    <input type="date" id="txtFecFinal" data-mini="true" required />
                                </div>
                            </div>
                            <div class="ui-block-b">
                                <div data-role="fieldcontain">
                                    <select id="cboRepHoraFinal" data-mini="true" required></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtClienteRecibe">Recibido Por:</label><input type="text" id="txtClienteRecibe" data-mini="true" required>
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtEmail">Emails:</label><input type="email" id="txtEmail" data-mini="true">
                    </div>


                    <div id="checkboxes1" data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                            <input id="chkFinalizado" name="" data-theme="c" type="checkbox" checked="checked">
                            <label for="chkFinalizado">
                                Finalizado               
                            </label>
                        </fieldset>
                    </div>
                </div>


                <div data-role="collapsible" data-collapsed="true" data-theme="b" data-content-theme="c">
                    <h3>Datos Adiciones</h3>
                    <div data-role="fieldcontain">
                        <label for="txtTelefono">Telefono de Contacto:</label><input type="text" id="txtTelefono" data-mini="true">
                    </div>
                    <div data-role="fieldcontain">
                        <label for="txtHorasCapacitacion">Horas Capacitacion:</label><input type="number" id="txtHorasCapacitacion" min="0" value="0" data-mini="true" />
                    </div>
                    <div data-role="fieldcontain">
                        <label for="cboTiempotraslado">Tiempo Traslado:</label><select id="cboTiempotraslado" data-mini="true"></select>
                    </div>
                </div>
            </div>
            <button data-theme="b" data-icon="check" data-iconpos="right" value="Guardar" onclick="JavaScript:Reportes.Validar.FechaCierre(true);">Guardar</button>
        </div>
    </div>
</body>
</html>
